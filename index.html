<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Ganhos</title>

    <!-- Metadados para SEO e Compartilhamento em Redes Sociais -->
    <meta name="author" content="Ricardo Costa Alves dos Santos">
    <meta name="description" content="Calcule seus ganhos diários, semanais, mensais e anuais em Dólar, Euro e Real Brasileiro com cotações atualizadas automaticamente. Ferramenta flexível para profissionais.">
    <meta name="keywords" content="calculadora de ganhos, salário, dólar, euro, real, cotação de moeda, finanças pessoais, jornada de trabalho, conversor de moeda, ganhos por hora, ganhos anuais">

    <!-- Open Graph / Facebook / LinkedIn -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://conversor-salario.vercel.app/"> <!-- ATUALIZE COM A URL REAL DA SUA PÁGINA -->
    <meta property="og:title" content="Calculadora de Ganhos - Dólar, Euro e Real">
    <meta property="og:description" content="Calcule seus ganhos diários, semanais, mensais e anuais em Dólar, Euro e Real Brasileiro com cotações atualizadas automaticamente. Ferramenta flexível para profissionais.">
    <meta property="og:image" content="https://placehold.co/1200x630/007bff/ffffff?text=Calculadora+de+Ganhos"> <!-- Imagem de prévia para compartilhamento -->

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://conversor-salario.vercel.app/"> <!-- ATUALIZE COM A URL REAL DA SUA PÁGINA -->
    <meta name="twitter:title" content="Calculadora de Ganhos - Dólar, Euro e Real">
    <meta name="twitter:description" content="Calcule seus ganhos diários, semanais, mensais e anuais em Dólar, Euro e Real Brasileiro com cotações atualizadas automaticamente. Ferramenta flexível para profissionais.">
    <meta name="twitter:image" content="https://placehold.co/1200x630/007bff/ffffff?text=Calculadora+de+Ganhos"> <!-- Imagem de prévia para compartilhamento -->
    <!-- <meta name="twitter:creator" content="@seu_twitter_aqui"> OPCIONAL: Adicione seu @ do Twitter, se tiver. -->

    <!-- Favicon (Ícone da aba do navegador) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>&#xf1ec;</text></svg>"> <!-- Ícone de calculadora Font Awesome -->

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8; /* Light blue-gray background */
            display: flex;
            justify-content: center;
            align-items: flex-start; /* Align to top for better scrollability */
            min-height: 100vh;
            padding: 2rem;
        }
        .container {
            background-color: #ffffff;
            padding: 2.5rem;
            border-radius: 1.5rem; /* More rounded corners */
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            max-width: 900px; /* Increased max-width */
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }
        .input-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        .input-group label {
            font-weight: 600;
            color: #334155; /* Darker text for labels */
        }
        .input-group input {
            padding: 0.75rem 1rem;
            border: 1px solid #cbd5e1; /* Light gray border */
            border-radius: 0.75rem; /* Rounded input fields */
            font-size: 1rem;
            transition: border-color 0.2s, box-shadow 0.2s;
        }
        .input-group input:focus {
            outline: none;
            border-color: #3b82f6; /* Blue focus border */
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2); /* Light blue shadow on focus */
        }
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); /* Responsive grid */
            gap: 1.5rem;
        }
        .result-card {
            background-color: #eff6ff; /* Very light blue background */
            padding: 1.25rem;
            border-radius: 1rem; /* Rounded cards */
            text-align: center;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        .result-card h3 {
            font-size: 1.125rem;
            font-weight: 700;
            color: #1e40af; /* Darker blue for titles */
            margin-bottom: 0.5rem;
        }
        .result-card p {
            font-size: 1.5rem;
            font-weight: 800;
            color: #1d4ed8; /* Stronger blue for values */
        }
        .section-title {
            font-size: 1.75rem; /* Larger title */
            font-weight: 700;
            color: #1e293b; /* Dark title color */
            margin-bottom: 1.5rem;
            text-align: center;
        }
        .subsection-title {
            font-size: 1.25rem; /* Sub-section title */
            font-weight: 600;
            color: #334155;
            margin-top: 1rem;
            margin-bottom: 1rem;
            text-align: center;
            width: 100%; /* Ensure it spans full width in its grid */
            grid-column: 1 / -1; /* Make it span all columns in a grid */
        }
        .error-message {
            color: #ef4444; /* Red error message */
            font-size: 0.875rem;
            margin-top: 0.25rem;
        }
        .currency-status {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            margin-top: 1rem;
            font-size: 0.9rem;
            color: #475569;
        }
        .currency-status button {
            background-color: #3b82f6;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: background-color 0.2s;
        }
        .currency-status button:hover {
            background-color: #2563eb;
        }
        .currency-status .loading-indicator {
            color: #1d4ed8;
            font-weight: 600;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-6">
    <div class="container">
        <h1 class="section-title">Calculadora de Ganhos</h1>

        <!-- Seção de Entradas -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <div class="input-group">
                <label for="hourlyRate">Valor Hora:</label>
                <input type="number" id="hourlyRate" value="44" step="0.01" min="0" class="w-full">
                <p id="errorHourlyRate" class="error-message hidden">Por favor, insira um número válido.</p>
            </div>
            <div class="input-group">
                <label for="annualEarningsUSD">Ganhos Anuais (USD):</label>
                <input type="number" id="annualEarningsUSD" value="" step="0.01" min="0" class="w-full" placeholder="Opcional">
                <p id="errorAnnualEarningsUSD" class="error-message hidden">Por favor, insira um número válido.</p>
            </div>
            <div class="input-group">
                <label for="annualEarningsEUR">Ganhos Anuais (EUR):</label>
                <input type="number" id="annualEarningsEUR" value="70000" step="0.01" min="0" class="w-full" placeholder="Opcional">
                <p id="errorAnnualEarningsEUR" class="error-message hidden">Por favor, insira um número válido.</p>
            </div>
            <div class="input-group">
                <label for="hoursPerDay">Horas por Dia:</label>
                <input type="number" id="hoursPerDay" value="8" step="0.5" min="0" max="24" class="w-full">
                <p id="errorHoursPerDay" class="error-message hidden">Por favor, insira um número válido entre 0 e 24.</p>
            </div>
            <div class="input-group">
                <label for="daysPerWeek">Dias por Semana (1-7):</label>
                <input type="number" id="daysPerWeek" value="5" step="1" min="1" max="7" class="w-full">
                <p id="errorDaysPerWeek" class="error-message hidden">Por favor, insira um número inteiro entre 1 e 7.</p>
            </div>
            <div class="input-group">
                <label for="usdToBrlRate">Taxa de Câmbio (USD para BRL):</label>
                <input type="number" id="usdToBrlRate" value="5.58" step="0.001" min="0" class="w-full" disabled> <!-- Disabled for API control -->
                <p id="errorUsdToBrlRate" class="error-message hidden">Por favor, insira um número válido.</p>
            </div>
            <div class="input-group">
                <label for="eurToBrlRate">Taxa de Câmbio (EUR para BRL):</label>
                <input type="number" id="eurToBrlRate" value="6.00" step="0.001" min="0" class="w-full" disabled> <!-- Disabled for API control -->
                <p id="errorEurToBrlRate" class="error-message hidden">Por favor, insira um número válido.</p>
            </div>
        </div>

        <div class="currency-status">
            <button id="fetchRatesButton">Atualizar Cotações</button>
            <span id="loadingIndicator" class="loading-indicator hidden">Atualizando cotações...</span>
            <span>Última atualização: <span id="lastUpdated">--:--</span></span>
        </div>

        <!-- Seção de Resultados USD -->
        <h2 class="section-title mt-8">Resultados em Dólar Americano (USD)</h2>
        <div class="results-grid">
            <div class="result-card">
                <h3>Diário</h3>
                <p id="dailyUSD">$0.00</p>
            </div>
            <div class="result-card">
                <h3>Semanal</h3>
                <p id="weeklyUSD">$0.00</p>
            </div>
            <div class="result-card">
                <h3>Mensal</h3>
                <p id="monthlyUSD">$0.00</p>
            </div>
            <div class="result-card">
                <h3>Anual</h3>
                <p id="annualUSD">$0.00</p>
            </div>
        </div>

        <!-- Seção de Resultados EUR -->
        <h2 class="section-title mt-8">Resultados em Euro (€)</h2>
        <div class="results-grid">
            <div class="result-card">
                <h3>Diário</h3>
                <p id="dailyEUR">€0.00</p>
            </div>
            <div class="result-card">
                <h3>Semanal</h3>
                <p id="weeklyEUR">€0.00</p>
            </div>
            <div class="result-card">
                <h3>Mensal</h3>
                <p id="monthlyEUR">€0.00</p>
            </div>
            <div class="result-card">
                <h3>Anual</h3>
                <p id="annualEUR">€0.00</p>
            </div>
        </div>

        <!-- Seção de Resultados BRL -->
        <h2 class="section-title mt-8">Resultados em Real Brasileiro (BRL)</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- BRL Equivalente USD -->
            <div>
                <h3 class="subsection-title">Equivalente ao Dólar Americano (USD)</h3>
                <div class="results-grid">
                    <div class="result-card">
                        <h3>Diário</h3>
                        <p id="dailyBRL_USD">R$0.00</p>
                    </div>
                    <div class="result-card">
                        <h3>Semanal</h3>
                        <p id="weeklyBRL_USD">R$0.00</p>
                    </div>
                    <div class="result-card">
                        <h3>Mensal</h3>
                        <p id="monthlyBRL_USD">R$0.00</p>
                    </div>
                    <div class="result-card">
                        <h3>Anual</h3>
                        <p id="annualBRL_USD">R$0.00</p>
                    </div>
                </div>
            </div>

            <!-- BRL Equivalente EUR -->
            <div>
                <h3 class="subsection-title">Equivalente ao Euro (€)</h3>
                <div class="results-grid">
                    <div class="result-card">
                        <h3>Diário</h3>
                        <p id="dailyBRL_EUR">R$0.00</p>
                    </div>
                    <div class="result-card">
                        <h3>Semanal</h3>
                        <p id="weeklyBRL_EUR">R$0.00</p>
                    </div>
                    <div class="result-card">
                        <h3>Mensal</h3>
                        <p id="monthlyBRL_EUR">R$0.00</p>
                    </div>
                    <div class="result-card">
                        <h3>Anual</h3>
                        <p id="annualBRL_EUR">R$0.00</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Get references to input elements
        const hourlyRateInput = document.getElementById('hourlyRate');
        const annualEarningsUSDInput = document.getElementById('annualEarningsUSD');
        const annualEarningsEURInput = document.getElementById('annualEarningsEUR');
        const hoursPerDayInput = document.getElementById('hoursPerDay');
        const daysPerWeekInput = document.getElementById('daysPerWeek');
        const usdToBrlRateInput = document.getElementById('usdToBrlRate');
        const eurToBrlRateInput = document.getElementById('eurToBrlRate');

        // Get references to currency status elements
        const fetchRatesButton = document.getElementById('fetchRatesButton');
        const loadingIndicator = document.getElementById('loadingIndicator');
        const lastUpdatedSpan = document.getElementById('lastUpdated');

        // Get references to error message elements
        const errorHourlyRate = document.getElementById('errorHourlyRate');
        const errorAnnualEarningsUSD = document.getElementById('errorAnnualEarningsUSD');
        const errorAnnualEarningsEUR = document.getElementById('errorAnnualEarningsEUR');
        const errorHoursPerDay = document.getElementById('errorHoursPerDay');
        const errorDaysPerWeek = document.getElementById('errorDaysPerWeek');
        const errorUsdToBrlRate = document.getElementById('errorUsdToBrlRate');
        const errorEurToBrlRate = document.getElementById('errorEurToBrlRate');

        // Constants for calculations
        const WEEKS_PER_YEAR = 52;
        const MONTHLY_WORK_DAYS = 22; // Average working days per month

        // Function to format numbers as currency
        const formatCurrency = (value, currencySymbol, locale = 'pt-BR') => {
            if (isNaN(value) || value === null || value === undefined) {
                return `${currencySymbol}0.00`;
            }
            return new Intl.NumberFormat(locale, {
                style: 'currency',
                currency: currencySymbol === '$' ? 'USD' : (currencySymbol === '€' ? 'EUR' : 'BRL')
            }).format(value);
        };

        // Function to validate input and show/hide error messages
        const validateInput = (inputElement, errorElement, min = 0, max = Infinity, isInteger = false) => {
            const value = inputElement.value.trim();

            // Allow empty string for optional fields, but validate if a value is present
            if (value === '') {
                errorElement.classList.add('hidden');
                return true; // Consider empty optional fields as valid for now
            }

            const parsedValue = parseFloat(value);

            if (isNaN(parsedValue) || parsedValue < min || parsedValue > max || (isInteger && parsedValue % 1 !== 0)) {
                errorElement.classList.remove('hidden');
                return false;
            } else {
                errorElement.classList.add('hidden');
                return true;
            }
        };

        // Function to fetch currency rates from API
        const fetchCurrencyRates = async () => {
            loadingIndicator.classList.remove('hidden');
            fetchRatesButton.disabled = true; // Disable button during fetch
            try {
                const response = await fetch('https://economia.awesomeapi.com.br/json/last/USD-BRL,EUR-BRL');
                if (!response.ok) {
                    throw new Error(`Erro HTTP! Status: ${response.status}`);
                }
                const data = await response.json();

                const usdRate = parseFloat(data.USDBRL.high);
                const eurRate = parseFloat(data.EURBRL.high);

                if (!isNaN(usdRate) && !isNaN(eurRate)) {
                    usdToBrlRateInput.value = usdRate.toFixed(3);
                    eurToBrlRateInput.value = eurRate.toFixed(3);
                    lastUpdatedSpan.textContent = new Date().toLocaleTimeString('pt-BR');
                    calculateEarnings(); // Recalculate all earnings with new rates
                } else {
                    console.error('A resposta da API não contém cotações de moeda válidas.');
                    lastUpdatedSpan.textContent = 'Erro ao carregar cotações.';
                }
            } catch (error) {
                console.error('Erro ao buscar cotações:', error);
                lastUpdatedSpan.textContent = 'Erro ao carregar cotações.';
            } finally {
                loadingIndicator.classList.add('hidden');
                fetchRatesButton.disabled = false; // Re-enable button
            }
        };

        // Main calculation function
        const calculateEarnings = () => {
            // Validate all inputs
            const isValidHoursPerDay = validateInput(hoursPerDayInput, errorHoursPerDay, 0, 24); // Max 24 hours
            const isValidDaysPerWeek = validateInput(daysPerWeekInput, errorDaysPerWeek, 1, 7, true); // Days per week 1-7, integer
            const isValidUsdToBrlRate = validateInput(usdToBrlRateInput, errorUsdToBrlRate);
            const isValidEurToBrlRate = validateInput(eurToBrlRateInput, errorEurToBrlRate);

            // Get parsed values, defaulting to 0 if invalid or empty
            const hoursPerDay = isValidHoursPerDay ? parseFloat(hoursPerDayInput.value) : 0;
            const daysPerWeek = isValidDaysPerWeek ? parseInt(daysPerWeekInput.value) : 0;
            const usdToBrlRate = isValidUsdToBrlRate ? parseFloat(usdToBrlRateInput.value) : 0;
            const eurToBrlRate = isValidEurToBrlRate ? parseFloat(eurToBrlRateInput.value) : 0;

            // Calculate ANNUAL_WORK_DAYS based on current inputs
            const ANNUAL_WORK_DAYS = daysPerWeek * WEEKS_PER_YEAR;

            // --- Determine USD source of truth and calculate ---
            let baseHourlyRateUSD = null;
            let baseAnnualUSD = null;

            const isHourlyRateProvided = hourlyRateInput.value.trim() !== '' && validateInput(hourlyRateInput, errorHourlyRate);
            const isAnnualEarningsUSDProvided = annualEarningsUSDInput.value.trim() !== '' && validateInput(annualEarningsUSDInput, errorAnnualEarningsUSD);

            if (isHourlyRateProvided) {
                baseHourlyRateUSD = parseFloat(hourlyRateInput.value);
                if (hoursPerDay > 0 && daysPerWeek > 0) {
                    baseAnnualUSD = baseHourlyRateUSD * hoursPerDay * daysPerWeek * WEEKS_PER_YEAR;
                    annualEarningsUSDInput.value = baseAnnualUSD.toFixed(2);
                } else {
                    baseAnnualUSD = 0;
                    annualEarningsUSDInput.value = '';
                }
            } else if (isAnnualEarningsUSDProvided) {
                baseAnnualUSD = parseFloat(annualEarningsUSDInput.value);
                if (hoursPerDay > 0 && daysPerWeek > 0 && ANNUAL_WORK_DAYS > 0) {
                    baseHourlyRateUSD = baseAnnualUSD / (hoursPerDay * ANNUAL_WORK_DAYS);
                    hourlyRateInput.value = baseHourlyRateUSD.toFixed(2);
                } else {
                    baseHourlyRateUSD = 0;
                    hourlyRateInput.value = '';
                }
            } else {
                hourlyRateInput.value = '';
                annualEarningsUSDInput.value = '';
            }

            // --- Final USD Calculations ---
            let finalDailyUSD = 0, finalWeeklyUSD = 0, finalMonthlyUSD = 0, finalAnnualUSD = 0;

            if (baseHourlyRateUSD !== null && baseHourlyRateUSD > 0 && hoursPerDay > 0 && daysPerWeek > 0) {
                finalDailyUSD = baseHourlyRateUSD * hoursPerDay;
                finalWeeklyUSD = finalDailyUSD * daysPerWeek;
                finalMonthlyUSD = finalDailyUSD * MONTHLY_WORK_DAYS;
                finalAnnualUSD = finalWeeklyUSD * WEEKS_PER_YEAR;
            } else if (baseAnnualUSD !== null && baseAnnualUSD > 0) {
                finalAnnualUSD = baseAnnualUSD;
                finalWeeklyUSD = finalAnnualUSD / WEEKS_PER_YEAR;
                if (daysPerWeek > 0) {
                    finalDailyUSD = finalWeeklyUSD / daysPerWeek;
                }
                finalMonthlyUSD = finalDailyUSD * MONTHLY_WORK_DAYS;
            }

            document.getElementById('dailyUSD').textContent = formatCurrency(finalDailyUSD, '$');
            document.getElementById('weeklyUSD').textContent = formatCurrency(finalWeeklyUSD, '$');
            document.getElementById('monthlyUSD').textContent = formatCurrency(finalMonthlyUSD, '$');
            document.getElementById('annualUSD').textContent = formatCurrency(finalAnnualUSD, '$');

            // --- Determine EUR source of truth and calculate ---
            let baseAnnualEUR = null;

            const isAnnualEarningsEURProvided = annualEarningsEURInput.value.trim() !== '' && validateInput(annualEarningsEURInput, errorAnnualEarningsEUR);

            if (isAnnualEarningsEURProvided) {
                baseAnnualEUR = parseFloat(annualEarningsEURInput.value);
            } else {
                annualEarningsEURInput.value = '';
            }

            // --- Final EUR Calculations ---
            let finalDailyEUR = 0, finalWeeklyEUR = 0, finalMonthlyEUR = 0, finalAnnualEUR = 0;

            if (baseAnnualEUR !== null && baseAnnualEUR > 0 && hoursPerDay > 0 && daysPerWeek > 0) {
                finalAnnualEUR = baseAnnualEUR;
                finalMonthlyEUR = finalAnnualEUR / 12;
                finalWeeklyEUR = finalAnnualEUR / WEEKS_PER_YEAR;
                if (ANNUAL_WORK_DAYS > 0) {
                    finalDailyEUR = finalAnnualEUR / ANNUAL_WORK_DAYS;
                }
            }

            document.getElementById('dailyEUR').textContent = formatCurrency(finalDailyEUR, '€');
            document.getElementById('weeklyEUR').textContent = formatCurrency(finalWeeklyEUR, '€');
            document.getElementById('monthlyEUR').textContent = formatCurrency(finalMonthlyEUR, '€');
            document.getElementById('annualEUR').textContent = formatCurrency(finalAnnualEUR, '€');

            // --- Calculate BRL Earnings (from USD) ---
            document.getElementById('dailyBRL_USD').textContent = formatCurrency(finalDailyUSD * usdToBrlRate, 'R$');
            document.getElementById('weeklyBRL_USD').textContent = formatCurrency(finalWeeklyUSD * usdToBrlRate, 'R$');
            document.getElementById('monthlyBRL_USD').textContent = formatCurrency(finalMonthlyUSD * usdToBrlRate, 'R$');
            document.getElementById('annualBRL_USD').textContent = formatCurrency(finalAnnualUSD * usdToBrlRate, 'R$');

            // --- Calculate BRL Earnings (from EUR) ---
            document.getElementById('dailyBRL_EUR').textContent = formatCurrency(finalDailyEUR * eurToBrlRate, 'R$');
            document.getElementById('weeklyBRL_EUR').textContent = formatCurrency(finalWeeklyEUR * eurToBrlRate, 'R$');
            document.getElementById('monthlyBRL_EUR').textContent = formatCurrency(finalMonthlyEUR * eurToBrlRate, 'R$');
            document.getElementById('annualBRL_EUR').textContent = formatCurrency(finalAnnualEUR * eurToBrlRate, 'R$');
        };

        // Add event listeners to input fields that trigger general calculations
        hourlyRateInput.addEventListener('input', () => {
            annualEarningsUSDInput.value = ''; // Clear annual when hourly is edited
            calculateEarnings();
        });
        annualEarningsUSDInput.addEventListener('input', () => {
            hourlyRateInput.value = ''; // Clear hourly when annual is edited
            calculateEarnings();
        });
        annualEarningsEURInput.addEventListener('input', calculateEarnings);
        hoursPerDayInput.addEventListener('input', calculateEarnings);
        daysPerWeekInput.addEventListener('input', calculateEarnings);

        // Add event listener for the manual fetch button
        fetchRatesButton.addEventListener('click', fetchCurrencyRates);

        // Initial setup on page load
        document.addEventListener('DOMContentLoaded', () => {
            calculateEarnings(); // Initial calculation with default/last known rates
            fetchCurrencyRates(); // Fetch real rates on load
            setInterval(fetchCurrencyRates, 300000); // Update every 5 minutes (300,000 ms)
        });
    </script>
</body>
</html>
